<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>McStas: Elliptic_guide_gravity Component</TITLE>
<LINK REV="made" HREF="mailto:peter.willendrup@risoe.dk">
</HEAD>

<BODY>

<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<H1>The <CODE>Elliptic_guide_gravity</CODE> Component</H1>

Perfect elliptic guide which allow for simulations with gravity.
The guide mirrors can be divided into segments with individual m-values.
Parabolic guide components can also be simulated.


<H2><A NAME=id></A>Identification</H2>

<UL>
  <LI> <B>Author:</B> Henrik Bo Hoffmann Carlsen and Mads Bertelsen</B>
  <LI> <B>Origin:</B> NBI</B>
  <LI> <B>Date:</B> 27 Aug 2012</B>
  <LI> <B>Version:</B> 0.91</B>
</UL>
<H2><A NAME=desc></A>Description</H2>

<PRE>

The perfect elliptic guide is centered along the z-axis with the entrance 
and exit in the xy-plane. The horizontal and vertical ellipses defining 
the guide geometry is by default set by two focal points. 
These are placed a distance away from the guide openings along the z-axis; 
if distance given is positive, when the focal point is outside the guide.

Multiple options for defining these ellipse exist including approximation of
parabolas and half ellipses (mid point of the ellipse or one of the guide openings)

The guide coating parameters can be set for each side of the guide. 
Furthermore the m-value can be specified for user defined segments 
of the guide. 


Example 1, Elliptical definition using focal points:
Elliptic_guide_gravity(
	l=50,
	linxw=5,linyh=5,loutxw=10,loutyh=10,
	xwidth=0.05,yheight=0.05,
	R0=0.99,Qc=0.0219,alpha=6.07,m=1.0,W=0.003
)

Example 2: Half elliptical definition:
Elliptic_guide_gravity(
	l=50,
	linxw=5,linyh=5,loutxw=10,loutyh=10,
	xwidth=0.1,yheight=0.1,
	R0=0.99,Qc=0.0219,alpha=6.07,m=1.0,W=0.003,
	option = "halfEllipse",
	dimensionsAt = "entrance"
)

Example 3: Parabolic approximation:
Elliptic_guide_gravity(
	l=50,
	linxw=5,linyh=5,loutxw=1e6,loutyh=1e6, // values larger than 1e8 may cause erroneous results
	xwidth=0.1,yheight=0.1,
	R0 = 0.99,Qc=0.0219,alpha=6.07,m=1.0,W=0.003,
	dimensionsAt = "exit"
)

Example 4: Elliptical definition with varying m-values:
Elliptic_guide_gravity(
	l=50,
	linxw=5,linyh=5,loutxw=10,loutyh=10,
	xwidth=0.1,yheight=0.1,
	R0 = 0.99,Qc=0.0219,alpha=6.07,m=1.0,W=0.003,
	mvaluesright=marray,mvaluesleft=marray,mvaluestop=marray,mvaluesbottom=marray
)
where marray is initialized as 
for(iter=0; iter < 50; iter++){ marray[iter] = 2; }
And Declared as
double mValues[50];

</PRE>
WARNING: <B>This is a contributed Component.</B>

<H2><A NAME=ipar></A>Input parameters</H2>
Parameters in <B>boldface</B> are required;
the others are optional.
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD>mvaluesright</TD>
     <TD>pointer</TD>
     <TD>Pointer to array of m-values, right mirror
</TD>
<TD ALIGN=RIGHT>NULL</TD> </TR>
<TR> <TD>mvaluesleft</TD>
     <TD>pointer</TD>
     <TD>- same, left mirror
</TD>
<TD ALIGN=RIGHT>NULL</TD> </TR>
<TR> <TD>mvaluestop</TD>
     <TD>pointer</TD>
     <TD>- same, top mirror
</TD>
<TD ALIGN=RIGHT>NULL</TD> </TR>
<TR> <TD>mvaluesbottom</TD>
     <TD>pointer</TD>
     <TD>- same, bottom mirror
</TD>
<TD ALIGN=RIGHT>NULL</TD> </TR>
<TR> <TD>seglength</TD>
     <TD>pointer</TD>
     <TD>Pointer to array of segment lengths for discrete mirror description
</TD>
<TD ALIGN=RIGHT>NULL	</TD> </TR>
<TR> <TD><B>l</B></TD>
     <TD>m</TD>
     <TD>length of the guide
</TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD>xwidth</TD>
     <TD>m</TD>
     <TD>width at the guide entry, mid or exit (see dimensionsAt)
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>yheight</TD>
     <TD>m</TD>
     <TD>height at the guide entry, mid or exit (see dimensionsAt)
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>linxw</TD>
     <TD>m</TD>
     <TD>distance from 1st focal point to guide entrance 
- left and right horizontal mirrors
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>loutxw</TD>
     <TD>m</TD>
     <TD>distance from 2nd focal point to guide exit 
- left and right horizontal mirrors
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>linyh</TD>
     <TD>m</TD>
     <TD>distance from 1st focal point to guide entrance 
- top and bottom vertical mirrors
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>loutyh</TD>
     <TD>m</TD>
     <TD>distance from 2nd focal point to guide exit 
- top and bottom vertical mirrors
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>majorAxisxw</TD>
     <TD>m</TD>
     <TD>direct defination of the guide geometry, will ignore 
w,h lin and lout parameters if this is nonzero. Length of 
the axis parallel to the z for the horizontal ellipse
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>minorAxisxw</TD>
     <TD>m</TD>
     <TD>direct defination of the guide geometry, will ignore 
w,h lin and lout parameters if this is nonzero. Length of 
the axis Perpendicular to the z for the horizontal ellipse
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>majorAxisyh</TD>
     <TD>m</TD>
     <TD>direct defination of the guide geometry, will ignore 
w,h lin and lout parameters if this is nonzero. Length of 
the axis parallel to the z for the vertical ellipse
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>minorAxisyh</TD>
     <TD>m</TD>
     <TD>direct defination of the guide geometry, will ignore 
w,h lin and lout parameters if this is nonzero. Length of 
the axis Perpendicular to the z for the vertical ellipse
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>majorAxisoffsetxw</TD>
     <TD>m</TD>
     <TD>direct defination of the guide geometry, 
distance between the center of the horizontal 
ellipse and the guide entrance							
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>majorAxisoffsetyh</TD>
     <TD>m</TD>
     <TD>direct defination of the guide geometry, 
distance between the center of the vertical 
ellipse and the guide entrance
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>dimensionsAt</TD>
     <TD>string</TD>
     <TD>define whether xwidth and yheight sets the size of 
he opening, minor axis or the end of the guide.
</TD>
<TD ALIGN=RIGHT>"entrance"</TD> </TR>
<TR> <TD>option</TD>
     <TD>string</TD>
     <TD>options are 'ellipse' and 'halfEllipse'. Ellipse is defined by 
both the focal points, while halfEllipse locked the center 
of the ellipse either the entrance or exit of the guide, and 
use the focal point of the other end to define the ellipse
</TD>
<TD ALIGN=RIGHT>"ellipse"</TD> </TR>
<TR> <TD>R0</TD>
     <TD>1</TD>
     <TD>Low-angle reflectivity
</TD>
<TD ALIGN=RIGHT>0.99</TD> </TR>
<TR> <TD>Qc</TD>
     <TD>AA-1</TD>
     <TD>Critical scattering vector
</TD>
<TD ALIGN=RIGHT>0.0218</TD> </TR>
<TR> <TD>alpha</TD>
     <TD>AA</TD>
     <TD>Slope of reflectivity
</TD>
<TD ALIGN=RIGHT>6.07</TD> </TR>
<TR> <TD>m</TD>
     <TD>1</TD>
     <TD>m-value of material for all mirrors, 
zero means complete absorption.
</TD>
<TD ALIGN=RIGHT>2</TD> </TR>
<TR> <TD>W</TD>
     <TD>AA-1</TD>
     <TD>Width of supermirror cut-off
</TD>
<TD ALIGN=RIGHT>0.003</TD> </TR>
<TR> <TD>alpharight</TD>
     <TD>AA</TD>
     <TD>Slope of reflectivity for right vertical mirror
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>mright</TD>
     <TD>1</TD>
     <TD>m-value of material for right vertical mirror
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>alphaleft</TD>
     <TD>AA</TD>
     <TD>Slope of reflectivity for left vertical mirror
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>mleft</TD>
     <TD>1</TD>
     <TD>m-value of material for left vertical mirror
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>alphatop</TD>
     <TD>AA</TD>
     <TD>Slope of reflectivity for top horizontal mirror, 
overwrites alpha
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>mtop</TD>
     <TD>1</TD>
     <TD>m-value of material for top horizontal mirror, 
overwrites m
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>alphabottom</TD>
     <TD>AA</TD>
     <TD>Slope of reflectivity for bottom horizontal mirror
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>mbottom</TD>
     <TD>1</TD>
     <TD>m-value of material for bottom horizontal mirror
</TD>
<TD ALIGN=RIGHT>-1</TD> </TR>
<TR> <TD>verbose</TD>
     <TD>bool</TD>
     <TD>Give extra information about calculations
</TD>
<TD ALIGN=RIGHT>"on"</TD> </TR>
<TR> <TD>curvature</TD>
     <TD>m</TD>
     <TD>Simulate horizontal radius of curvature by centripetal force added to the gravity. Note: Does not curve the guide in mcdisplay but "curves the neutron". Has opposite sign definition of Guide_curved.
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
</TABLE>


<H2><A NAME=opar></A>Output parameters</H2>
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD><B>
	guideInfo</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>latestParticleCollision</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Gx</B></TD>
     <TD>-</TD>
     <TD>x-component of (m/s^2) local gravity vector</TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Gy</B></TD>
     <TD>-</TD>
     <TD>y-component of (m/s^2) local gravity vector</TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Gz</B></TD>
     <TD>-</TD>
     <TD>z-component of (m/s^2) local gravity vector</TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Gx0</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Gy0</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Gz0</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>Circ</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>dynamicalSegLength
	</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
</TABLE>


<H2><A NAME=links></A>Links</H2>

<UL>
  <LI> <A HREF="Elliptic_guide_gravity.comp">Source code</A> for <CODE>Elliptic_guide_gravity.comp</CODE>.
</UL>
<HR>
<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<ADDRESS>
Generated automatically by McDoc, Peter Willendrup
&lt;<A HREF="mailto:peter.willendrup@risoe.dk">peter.willendrup@risoe.dk</A>&gt; /
Thu Jun 16 08:51:07 2016</ADDRESS>
</BODY></HTML>
